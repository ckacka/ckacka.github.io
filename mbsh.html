<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>妙笔生花 - 智能作文生成器</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    <style>
        :root {
            --primary: #6750A4;
            --on-primary: #FFFFFF;
            --primary-container: #EADDFF;
            --on-primary-container: #21005D;
            --secondary: #625B71;
            --on-secondary: #FFFFFF;
            --secondary-container: #E8DEF8;
            --on-secondary-container: #1D192B;
            --surface: #FFFBFE;
            --surface-dim: #DED8E1;
            --surface-bright: #FFFBFE;
            --surface-container-lowest: #FFFFFF;
            --surface-container-low: #F7F2FA;
            --surface-container: #F3EDF7;
            --surface-container-high: #ECE6F0;
            --surface-container-highest: #E6E0E9;
            --on-surface: #1C1B1F;
            --on-surface-variant: #49454F;
            --outline: #79747E;
            --outline-variant: #CAC4D0;
            --shadow: #000000;
            
            --font-family: 'Roboto', 'Noto Sans SC', sans-serif;
            --border-radius: 12px;
            --border-radius-small: 8px;
            --border-radius-large: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--surface);
            color: var(--on-surface);
            line-height: 1.5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background-color: var(--primary);
            color: var(--on-primary);
            padding: 16px 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 500;
        }

        .logo-icon {
            font-size: 2rem;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 16px;
        }

        nav a {
            color: var(--on-primary);
            text-decoration: none;
            padding: 8px 12px;
            border-radius: var(--border-radius);
            transition: background-color 0.2s;
        }

        nav a:hover, nav a.active {
            background-color: rgba(255, 255, 255, 0.1);
        }

        main {
            flex: 1;
            padding: 24px 20px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background-color: var(--surface-container);
            border-radius: var(--border-radius-large);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        h2 {
            font-size: 1.5rem;
            margin-bottom: 16px;
            color: var(--on-surface);
        }

        .input-group {
            margin-bottom: 16px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: var(--on-surface-variant);
            font-size: 0.875rem;
        }

        /* 增强输入框视觉显著性 */
        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--outline-variant);
            border-radius: var(--border-radius-small);
            background-color: var(--surface-container-lowest);
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(103, 80, 164, 0.2);
            background-color: var(--surface-container-lowest);
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .primary-button {
            background-color: var(--primary);
            color: var(--on-primary);
        }

        .primary-button:hover {
            background-color: #5A4D8C;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .primary-button:disabled {
            background-color: var(--outline-variant);
            cursor: not-allowed;
        }

        .secondary-button {
            background-color: var(--secondary-container);
            color: var(--on-secondary-container);
        }

        .secondary-button:hover {
            background-color: #D5C9E7;
        }

        .outline-button {
            background-color: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .outline-button:hover {
            background-color: rgba(103, 80, 164, 0.08);
        }

        .editor-container {
            border: 1px solid var(--outline-variant);
            border-radius: var(--border-radius-small);
            overflow: hidden;
        }

        /* 优化工具栏布局 */
        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 12px;
            background-color: var(--surface-container-high);
            border-bottom: 1px solid var(--outline-variant);
        }

        /* 为工具栏添加分隔线 */
        .toolbar .separator {
            width: 1px;
            height: 24px;
            background-color: var(--outline-variant);
            margin: 0 8px;
        }

        /* 优化工具按钮 */
        .tool-button {
            padding: 8px 10px;
            border-radius: var(--border-radius-small);
            background: none;
            border: none;
            color: var(--on-surface-variant);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 40px;
        }

        .tool-button:hover {
            background-color: var(--surface-container);
        }

        .tool-button.active {
            background-color: var(--primary-container);
            color: var(--on-primary-container);
        }

        #editor-content {
            min-height: 300px;
            padding: 16px;
            font-size: 1rem;
            line-height: 1.6;
            outline: none;
            background-color: var(--surface-container-lowest);
        }

        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .template-card {
            background-color: var(--surface-container-lowest);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .template-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .template-preview {
            height: 120px;
            background-color: var(--primary-container);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--on-primary-container);
            font-size: 1.5rem;
        }

        .template-info {
            padding: 16px;
        }

        .template-title {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .template-desc {
            font-size: 0.875rem;
            color: var(--on-surface-variant);
        }

        .essay-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 16px;
        }

        .essay-item {
            background-color: var(--surface-container-lowest);
            border-radius: var(--border-radius);
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .essay-info h3 {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .essay-meta {
            font-size: 0.875rem;
            color: var(--on-surface-variant);
        }

        .essay-actions {
            display: flex;
            gap: 8px;
        }

        .action-button {
            padding: 8px;
            border-radius: 20px;
            background: none;
            border: none;
            color: var(--on-surface-variant);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-button:hover {
            background-color: var(--surface-container);
        }

        footer {
            background-color: var(--surface-container-high);
            padding: 16px 20px;
            text-align: center;
            color: var(--on-surface-variant);
            font-size: 0.875rem;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--surface-container);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .generated-content {
            background-color: var(--surface-container);
            border-radius: var(--border-radius-small);
            padding: 16px;
            margin-top: 16px;
            white-space: pre-line;
        }

        .error-message {
            background-color: #ffebee;
            color: #c62828;
            padding: 12px;
            border-radius: var(--border-radius-small);
            margin-top: 16px;
            display: none;
        }

        .api-config {
            background-color: var(--surface-container-high);
            border-radius: var(--border-radius);
            padding: 16px;
            margin-bottom: 16px;
        }

        .api-config h3 {
            margin-bottom: 12px;
            font-size: 1rem;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 16px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .template-grid {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            button {
                justify-content: center;
            }
            
            .separator {
                display: none;
            }
            
            .toolbar {
                gap: 4px;
                padding: 8px;
            }
            
            .tool-button {
                padding: 6px 8px;
                min-width: 36px;
            }
            
            #editor-content {
                padding: 12px;
                min-height: 250px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <span class="material-symbols-outlined logo-icon">edit</span>
                <span>妙笔生花</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#" class="nav-link active" data-section="editor">作文编辑</a></li>
                    <li><a href="#" class="nav-link" data-section="templates">作文模板</a></li>
                    <li><a href="#" class="nav-link" data-section="ai-generator">AI生成</a></li>
                    <li><a href="#" class="nav-link" data-section="my-essays">我的作文</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <!-- 作文编辑区 -->
        <section id="editor" class="section active">
            <div class="card">
                <h2>作文编辑器</h2>
                <div class="input-group">
                    <label for="essay-title">作文标题</label>
                    <input type="text" id="essay-title" placeholder="请输入作文标题">
                </div>
                <div class="editor-container">
                    <div class="toolbar">
                        <button class="tool-button" data-command="bold" title="加粗">
                            <span class="material-symbols-outlined">format_bold</span>
                        </button>
                        <button class="tool-button" data-command="italic" title="斜体">
                            <span class="material-symbols-outlined">format_italic</span>
                        </button>
                        <button class="tool-button" data-command="underline" title="下划线">
                            <span class="material-symbols-outlined">format_underlined</span>
                        </button>
                        <div class="separator"></div>
                        <button class="tool-button" data-command="insertUnorderedList" title="无序列表">
                            <span class="material-symbols-outlined">format_list_bulleted</span>
                        </button>
                        <button class="tool-button" data-command="insertOrderedList" title="有序列表">
                            <span class="material-symbols-outlined">format_list_numbered</span>
                        </button>
                        <div class="separator"></div>
                        <select id="font-size" title="字体大小">
                            <option value="1">小</option>
                            <option value="3" selected>中</option>
                            <option value="5">大</option>
                            <option value="7">特大</option>
                        </select>
                        <select id="font-family" title="字体">
                            <option value="Arial">Arial</option>
                            <option value="Times New Roman" selected>Times New Roman</option>
                            <option value="宋体">宋体</option>
                            <option value="微软雅黑">微软雅黑</option>
                        </select>
                    </div>
                    <div id="editor-content" contenteditable="true"></div>
                </div>
                <div class="button-group">
                    <button class="primary-button" id="save-essay">
                        <span class="material-symbols-outlined">save</span>
                        保存作文
                    </button>
                    <button class="secondary-button" id="clear-editor">
                        <span class="material-symbols-outlined">delete</span>
                        清空内容
                    </button>
                </div>
            </div>
        </section>

        <!-- 作文模板区 -->
        <section id="templates" class="section">
            <div class="card">
                <h2>作文模板库</h2>
                <p>选择适合的模板快速开始写作</p>
                <div class="template-grid">
                    <div class="template-card" data-template="narrative">
                        <div class="template-preview">
                            <span class="material-symbols-outlined">article</span>
                        </div>
                        <div class="template-info">
                            <div class="template-title">记叙文模板</div>
                            <div class="template-desc">适合讲述故事、经历</div>
                        </div>
                    </div>
                    <div class="template-card" data-template="argumentative">
                        <div class="template-preview">
                            <span class="material-symbols-outlined">balance</span>
                        </div>
                        <div class="template-info">
                            <div class="template-title">议论文模板</div>
                            <div class="template-desc">适合表达观点、论证</div>
                        </div>
                    </div>
                    <div class="template-card" data-template="descriptive">
                        <div class="template-preview">
                            <span class="material-symbols-outlined">palette</span>
                        </div>
                        <div class="template-info">
                            <div class="template-title">描写文模板</div>
                            <div class="template-desc">适合描绘景物、人物</div>
                        </div>
                    </div>
                    <div class="template-card" data-template="expository">
                        <div class="template-preview">
                            <span class="material-symbols-outlined">lightbulb</span>
                        </div>
                        <div class="template-info">
                            <div class="template-title">说明文模板</div>
                            <div class="template-desc">适合解释说明事物</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI生成区 -->
        <section id="ai-generator" class="section">
            <div class="card">
                <h2>AI作文生成</h2>
                
                <div class="api-config">
                    <h3>API配置</h3>
                    <div class="input-group">
                        <label for="api-key">DeepSeek API密钥</label>
                        <input type="password" id="api-key" placeholder="请输入您的DeepSeek API密钥">
                    </div>
                    <p style="font-size: 0.875rem; color: var(--on-surface-variant); margin-top: 8px;">
                        您可以在 <a href="https://platform.deepseek.com/" target="_blank">DeepSeek平台</a> 获取API密钥，或者使用此免费密钥：sk-bdd465c76bdf47b89b1497301bb7c13e（有时可能会失效）
                    </p>
                </div>
                
                <div class="input-group">
                    <label for="essay-topic">作文主题</label>
                    <input type="text" id="essay-topic" placeholder="例如：我的暑假生活">
                </div>
                <div class="input-group">
                    <label for="essay-type">作文类型</label>
                    <select id="essay-type">
                        <option value="narrative">记叙文</option>
                        <option value="argumentative">议论文</option>
                        <option value="descriptive">描写文</option>
                        <option value="expository">说明文</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="essay-length">作文长度</label>
                    <select id="essay-length">
                        <option value="short">短篇（300字左右）</option>
                        <option value="medium" selected>中篇（500字左右）</option>
                        <option value="long">长篇（800字左右）</option>
                    </select>
                </div>
                <div class="button-group">
                    <button class="primary-button" id="generate-essay">
                        <span class="material-symbols-outlined">auto_awesome</span>
                        生成作文
                    </button>
                </div>
                <div class="loading" id="generating-loading">
                    <div class="spinner"></div>
                    <p>AI正在努力创作中...</p>
                </div>
                <div class="error-message" id="error-message"></div>
                <div class="generated-content" id="generated-content" style="display: none;"></div>
            </div>
        </section>

        <!-- 我的作文区 -->
        <section id="my-essays" class="section">
            <div class="card">
                <h2>我的作文</h2>
                <div class="essay-list" id="essay-list">
                    <!-- 作文列表将通过JavaScript动态生成 -->
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>妙笔生花 &copy; 2025 - 让写作变得更简单</p>
    </footer>

    <script>
        // 页面导航功能
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // 更新活动导航链接
                document.querySelectorAll('.nav-link').forEach(item => {
                    item.classList.remove('active');
                });
                this.classList.add('active');
                
                // 显示对应内容区域
                const sectionId = this.getAttribute('data-section');
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(sectionId).classList.add('active');
            });
        });

        // 编辑器功能
        document.querySelectorAll('.tool-button').forEach(button => {
            button.addEventListener('click', function() {
                const command = this.getAttribute('data-command');
                document.execCommand(command, false, null);
                this.classList.toggle('active');
            });
        });

        // 字体大小和字体家族更改
        document.getElementById('font-size').addEventListener('change', function() {
            document.execCommand('fontSize', false, this.value);
        });

        document.getElementById('font-family').addEventListener('change', function() {
            document.execCommand('fontName', false, this.value);
        });

        // 保存作文功能
        document.getElementById('save-essay').addEventListener('click', function() {
            const title = document.getElementById('essay-title').value.trim();
            const content = document.getElementById('editor-content').innerHTML;
            
            if (!title) {
                alert('请输入作文标题');
                return;
            }
            
            if (!content) {
                alert('作文内容不能为空');
                return;
            }
            
            // 获取已保存的作文列表
            let essays = JSON.parse(localStorage.getItem('essays') || '[]');
            
            // 添加新作文
            essays.push({
                id: Date.now(),
                title: title,
                content: content,
                date: new Date().toLocaleDateString('zh-CN'),
                wordCount: content.replace(/<[^>]*>/g, '').length
            });
            
            // 保存到本地存储
            localStorage.setItem('essays', JSON.stringify(essays));
            
            alert('作文保存成功！');
            loadEssays(); // 刷新作文列表
        });

        // 清空编辑器
        document.getElementById('clear-editor').addEventListener('click', function() {
            if (confirm('确定要清空当前内容吗？')) {
                document.getElementById('essay-title').value = '';
                document.getElementById('editor-content').innerHTML = '';
            }
        });

        // 模板应用功能
        document.querySelectorAll('.template-card').forEach(card => {
            card.addEventListener('click', function() {
                const templateType = this.getAttribute('data-template');
                applyTemplate(templateType);
                
                // 切换到编辑器标签
                document.querySelector('[data-section="editor"]').click();
            });
        });

        // AI作文生成功能 - 集成DeepSeek API
        document.getElementById('generate-essay').addEventListener('click', async function() {
            const topic = document.getElementById('essay-topic').value.trim();
            const type = document.getElementById('essay-type').value;
            const length = document.getElementById('essay-length').value;
            const apiKey = document.getElementById('api-key').value.trim();
            
            if (!topic) {
                showError('请输入作文主题');
                return;
            }
            
            if (!apiKey) {
                showError('请输入DeepSeek API密钥');
                return;
            }
            
            // 显示加载动画
            document.getElementById('generating-loading').style.display = 'block';
            document.getElementById('generated-content').style.display = 'none';
            document.getElementById('error-message').style.display = 'none';
            this.disabled = true;
            
            try {
                // 构建提示词
                const prompt = buildPrompt(topic, type, length);
                
                // 调用DeepSeek API
                const response = await fetch('https://api.deepseek.com/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'deepseek-chat',
                        messages: [
                            {
                                role: 'system',
                                content: '你是一位专业的作文助手，擅长创作各种类型的作文，包括记叙文、议论文、说明文和描写文。请根据用户的要求创作一篇高质量的作文。'
                            },
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        stream: false,
                        max_tokens: 2000
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error?.message || `API请求失败: ${response.status}`);
                }
                
                const data = await response.json();
                const generatedContent = data.choices[0].message.content;
                
                // 显示生成的内容
                document.getElementById('generated-content').innerHTML = generatedContent;
                document.getElementById('generated-content').style.display = 'block';
                
                // 将生成的内容填充到编辑器
                document.getElementById('essay-title').value = topic;
                document.getElementById('editor-content').innerHTML = generatedContent;
                
            } catch (error) {
                console.error('生成作文时出错:', error);
                showError(`生成作文时出错: ${error.message}`);
            } finally {
                // 隐藏加载动画
                document.getElementById('generating-loading').style.display = 'none';
                this.disabled = false;
            }
        });

        // 构建提示词
        function buildPrompt(topic, type, length) {
            const typeNames = {
                narrative: "记叙文",
                argumentative: "议论文",
                descriptive: "描写文",
                expository: "说明文"
            };
            
            const lengthWords = {
                short: 300,
                medium: 500,
                long: 800
            };
            
            return `请创作一篇关于"${topic}"的${typeNames[type]}，要求如下：
1. 字数控制在${lengthWords[length]}字左右
2. 符合${typeNames[type]}的文体特点
3. 内容充实，结构完整，语言流畅
4. 如果是记叙文，要有完整的情节发展；如果是议论文，要有明确的论点论据；如果是描写文，要生动形象；如果是说明文，要条理清晰
5. 请直接输出作文内容，不要添加额外的说明或标记`;
        }

        // 显示错误信息
        function showError(message) {
            const errorElement = document.getElementById('error-message');
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        // 加载我的作文列表
        function loadEssays() {
            const essayList = document.getElementById('essay-list');
            essayList.innerHTML = '';
            
            const essays = JSON.parse(localStorage.getItem('essays') || '[]');
            
            if (essays.length === 0) {
                essayList.innerHTML = '<p>暂无保存的作文</p>';
                return;
            }
            
            essays.forEach(essay => {
                const essayItem = document.createElement('div');
                essayItem.className = 'essay-item';
                essayItem.innerHTML = `
                    <div class="essay-info">
                        <h3>${essay.title}</h3>
                        <div class="essay-meta">${essay.date} · ${essay.wordCount}字</div>
                    </div>
                    <div class="essay-actions">
                        <button class="action-button" title="编辑" onclick="editEssay(${essay.id})">
                            <span class="material-symbols-outlined">edit</span>
                        </button>
                        <button class="action-button" title="删除" onclick="deleteEssay(${essay.id})">
                            <span class="material-symbols-outlined">delete</span>
                        </button>
                    </div>
                `;
                essayList.appendChild(essayItem);
            });
        }

        // 编辑作文
        function editEssay(id) {
            const essays = JSON.parse(localStorage.getItem('essays') || '[]');
            const essay = essays.find(e => e.id === id);
            
            if (essay) {
                document.getElementById('essay-title').value = essay.title;
                document.getElementById('editor-content').innerHTML = essay.content;
                
                // 切换到编辑器标签
                document.querySelector('[data-section="editor"]').click();
            }
        }

        // 删除作文
        function deleteEssay(id) {
            if (confirm('确定要删除这篇作文吗？')) {
                let essays = JSON.parse(localStorage.getItem('essays') || '[]');
                essays = essays.filter(e => e.id !== id);
                localStorage.setItem('essays', JSON.stringify(essays));
                loadEssays();
            }
        }

        // 应用模板
        function applyTemplate(templateType) {
            const templates = {
                narrative: `
                    <h3>开头（引入事件）</h3>
                    <p>简述事件发生的时间、地点和背景。</p>
                    
                    <h3>经过（详细叙述）</h3>
                    <p>详细描述事件的发展过程，包括人物的言行和心理活动。</p>
                    
                    <h3>高潮（关键转折）</h3>
                    <p>描述事件中最关键、最精彩的部分。</p>
                    
                    <h3>结尾（感悟总结）</h3>
                    <p>总结事件的意义，表达自己的感受和收获。</p>
                `,
                argumentative: `
                    <h3>提出论点</h3>
                    <p>明确表达自己的观点和立场。</p>
                    
                    <h3>论证部分</h3>
                    <p>提供事实、数据或理论支持自己的观点。</p>
                    
                    <h3>反驳对立观点</h3>
                    <p>分析并反驳可能存在的不同意见。</p>
                    
                    <h3>总结重申</h3>
                    <p>再次强调自己的观点，提出建议或展望。</p>
                `,
                descriptive: `
                    <h3>整体印象</h3>
                    <p>描述对象的整体外观和给人的第一印象。</p>
                    
                    <h3>细节描写</h3>
                    <p>从不同角度详细描写对象的特征。</p>
                    
                    <h3>环境氛围</h3>
                    <p>描述对象所处的环境和营造的氛围。</p>
                    
                    <h3>个人感受</h3>
                    <p>表达对象给自己带来的感受和联想。</p>
                `,
                expository: `
                    <h3>概念定义</h3>
                    <p>明确说明要解释的对象或概念。</p>
                    
                    <h3>特点分析</h3>
                    <p>分析对象的主要特点和属性。</p>
                    
                    <h3>原理阐述</h3>
                    <p>解释对象的工作原理或形成过程。</p>
                    
                    <h3>应用价值</h3>
                    <p>说明对象的实际应用和价值意义。</p>
                `
            };
            
            document.getElementById('editor-content').innerHTML = templates[templateType] || '';
        }

        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            loadEssays();
            
            // 尝试从本地存储加载API密钥
            const savedApiKey = localStorage.getItem('deepseek_api_key');
            if (savedApiKey) {
                document.getElementById('api-key').value = savedApiKey;
            }
            
            // 保存API密钥到本地存储
            document.getElementById('api-key').addEventListener('input', function() {
                localStorage.setItem('deepseek_api_key', this.value);
            });
        });
    </script>
</body>
</html>

